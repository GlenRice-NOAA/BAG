cmake_minimum_required (VERSION 2.6)
PROJECT (OPENNS_EXAMPLES)

#-----------------------------------------------------------------------------
# Setup include Directories
#-----------------------------------------------------------------------------
include_directories(${OPENNS_SOURCE_DIR}/api ${HDF5_INCLUDE_DIR} ${XERCESC_INCLUDE_DIR})
link_directories(${XERCESC_LIB_DIR} ${HDF5_LIB_DIR} ${BEECRYPT_LIB_DIR})

IF(MSVC)
    #ignore some warnings generated by windows.
    add_definitions(/D_CRT_SECURE_NO_WARNINGS /D _CRT_NONSTDC_NO_DEPRECATE)
    
    #compile using the dll.
    add_definitions(/D BAG_DLL /D _HDF5USEDLL_)
ENDIF(MSVC)

#-----------------------------------------------------------------------------
# Define Sources
#-----------------------------------------------------------------------------
SET (examples
    bag_create
    bag_gencert
    bag_read
    bag_signcert
    bag_signfile
    bag_verifycert
    bag_verifyfile
)

FOREACH (example ${examples})
  
    ADD_EXECUTABLE (${example} ${example}.c getopt.c excertlib.cpp)
    SET_TARGET_PROPERTIES (${example} PROPERTIES FOLDER examples)
    
    #Link with the bag library.
    TARGET_LINK_LIBRARIES(${example} bag)
    
    #Add the '_debug' postfix to the samples.
    SET_TARGET_PROPERTIES( ${example}
        PROPERTIES
        DEBUG_OUTPUT_NAME ${example}_debug
        RELEASE_OUTPUT_NAME ${example}
    )
    
ENDFOREACH (example ${examples})
